# Global Codex Guidance

codex cli のためのグローバル運用ルール。

## 状況別のルール

| 状況 | 必須対応 |
| --- | --- |
| 同一コマンド（または同一アプローチ）が失敗するとき | 2回失敗したら停止し、エラー要約・実行コマンド・終了コード・直近ログ抜粋（目安: 直近50行）を提示して次の方針を確認する。 |
| 破壊的な操作（削除、上書き、`git reset`/`checkout`、強制 push 等） | ユーザーに確認してから実行する。可能なら先にドライラン／差分を提示する。 |
| `git status` / `git diff` などを確認するとき | 読み取り専用のコンテキストとして扱う。勝手に巻き戻さない。 |
| 依存関係を追加するとき | 既存依存／標準機能で代替できないか確認し、候補比較（メンテ状況・互換性・ライセンス）を示した上でユーザーに確認する。 |
| ログや設定にシークレットが含まれうるとき | 出力に露出させない。ユーザーに貼り付けを要求しない。 |

## 正確性・情報源

依頼された内容が最新の情報に依存する場合（例：「最新」「現在」「今日」「今の時点では」）：

- **現在の日時を確定し**、ISO 形式（タイムゾーン含む）で明示する。
   - 推奨：`date -Is`（タイムスタンプ）
- 調査では **公式／一次情報を優先**する：
   - 依存関係（言語ランタイム、フレームワーク、クラウド事業者など）については、上流ベンダーのドキュメントを優先する
- **最新かつ権威ある情報**を優先する：
   - 最新のバージョン付きドキュメント、リリースノート、変更履歴（changelog）を使う
   - 安全性／互換性に関わる詳細は、信頼できる情報源を少なくとも 2 つ突き合わせて確認する
